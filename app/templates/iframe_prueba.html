<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Prueba de Iframe Padre</title>
</head>
<body>
    
    {% include '_header.html' %}
    <iframe id="videoFrame"
    src="{{ url_for('main.upload_prueba_hijo') }}"
    style="width:100%;border:0;display:block;min-height:320px;">
    </iframe>

    <script>
        const iframe = document.getElementById('videoFrame');
        
        const datosCompletosParaIframe = {
            auth_token: {{ auth_token | tojson }}, 
            
            club_id: 1,
            club_nombre: "Club Independiente Rivadavia", 
            club_logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/7f/Escudo_del_Club_Independiente_Rivadavia.svg/250px-Escudo_del_Club_Independiente_Rivadavia.svg.png",
            club_color: "#0e1d90", 
            user_id: 456,
            user_name: "Socio de Prueba" 
        };

        iframe.onload = function() {
            iframe.contentWindow.postMessage(datosCompletosParaIframe, window.location.origin);
        };
    </script>
    <script>
    (function () {
    function fit() {
        const i = document.getElementById('videoFrame');
        const header = document.querySelector('.demo-header')?.offsetHeight || 0;
        const footer = document.querySelector('.demo-footer')?.offsetHeight || 0;
        const vh = Math.max(window.innerHeight, document.documentElement.clientHeight);
        i.style.height = Math.max(vh - header - footer, 320) + 'px';
    }
    window.addEventListener('load', fit, { once: true });
    window.addEventListener('resize', fit);
    window.addEventListener('orientationchange', fit);
    })();
    </script>
    {% include '_footer.html' %}

</body>
</html>